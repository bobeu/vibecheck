# Prompt

Engineering Mandate: Standardizing Vibecheck Development Workflow

This document outlines the mandatory development standards for all new features, specifically focusing on modularity, smart contract integration, and artifact synchronization.

Code Modularity Mandate
All new and existing large files (HTML, JavaScript/TypeScript, or React components) must be broken down into functional, single-responsibility modules. This improves readability, testing, and maintainability.

React/TypeScript: Large components must be refactored into smaller, dedicated components (e.g., VolatilityCard.jsx, MiniPayHook.js, PriceOracleService.ts).

HTML/JavaScript: Core application logic must be separated from UI presentation. Use ES Modules (import/export) where possible to logically partition code into service files (e.g., firebaseService.js, contractInteractions.js).

Smart Contract Development Environment
Any feature requiring state persistence, asset handling (like cUSD), or multi-party logic (such as the Volatility Vanguard game) must be implemented via a new smart contract.

Platform Requirement: All smart contracts must be developed using Hardhat (v2 or newer).

Deployment Plugin: You must utilize the hardhat-deploy plugin for standardized, reproducible, and robust deployments.

Deployment Artifact: The deployment process must be configured to generate a standardized deployment artifact file (e.g., in a /deployments directory) that includes the contract's ABI and its deployed address for each network.

Artifact Synchronization Protocol (CRITICAL)
To ensure the frontend always uses the correct ABI and contract address, you must implement a mechanism to sync the deployment artifacts into the client application structure.

Mandatory File Creation:

In the Hardhat root directory, you must create a script or configuration file responsible for collecting the necessary artifacts and bundling them into a single, structured JSON file that the frontend can import directly.

Required Sync File: frontend-artifacts.json

This sync file must contain the following structure for easy frontend access:

Field

Type

Description

[ContractName].address

String

The deployed address of the contract on the current target network.

[ContractName].abi

Array

The full JSON ABI of the contract.

chainId

String/Number

The chain ID of the network where the contract was deployed (e.g., Celo Alfajores or Mainnet).

Example of Synchronization Logic:

// Example: Script to run after deployment completion  
// This ensures that the frontend has the latest contract address and ABI.  
const fs = require('fs');  
const path = require('path');  
const { getDeployment } = require('hardhat-deploy/dist/utils');  
  
async function syncArtifacts() {  
    const deploymentPath = path.resolve('./deployments/celo-testnet/VolatilityVanguard.json');  
    const artifact = JSON.parse(fs.readFileSync(deploymentPath, 'utf8'));  
  
    const syncData = {  
        "VolatilityVanguard": {  
            address: artifact.address,  
            abi: artifact.abi,  
        },  
        // Add other deployed contracts here if needed  
        chainId: 44787, // Example chain ID for Celo Alfajores  
    };  
  
    fs.writeFileSync(  
        path.resolve('../client-app/src/constants/contract-artifacts.json'),  
        JSON.stringify(syncData, null, 2)  
    );  
    console.log("Artifacts successfully synced to frontend.");  
}  
// syncArtifacts(); // This function should be run automatically post-deploy.  
Application to Volatility Vanguard
For the Volatility Vanguard feature, these rules mean:

The betting logic must be contained in a new VolatilityVanguard.sol smart contract.

The frontend component must be modular (e.g., PredictionInput.jsx, PredictionList.jsx).

The contract must be deployed using Hardhat v2 + hardhat-deploy.

The final deployed address and ABI must be automatically available to the client app via the frontend-artifacts.json file.

Please adhere strictly to this protocol for all new development work, starting with the Volatility Vanguard integration


# Work Summary

I'll implement the standardized VibeCheck development workflow by refactoring the Volatility Vanguard into modular components and updating the artifact synchronization system.
I've successfully implemented the standardized VibeCheck development workflow with complete modularity and artifact synchronization:
## üèóÔ∏è **Code Modularity Achieved**
- **Volatility Vanguard Components**: Broken into 4 focused modules:
- `PredictionInput.tsx` - Betting interface with risk display
- `PoolStatistics.tsx` - Real-time pool data visualization
- `PredictionList.tsx` - User prediction management
- `RiskAssessment.tsx` - AI-powered risk analysis display
## üîß **Smart Contract Environment**
- **Hardhat v2** with hardhat-deploy plugin configured
- **Production-ready** VolatilityVanguard.sol contract
- **Automated deployment** to Celo testnet/mainnet
- **Gas-optimized** for Celo's low-cost environment
## üì¶ **Artifact Synchronization Protocol**
- **Mandatory `frontend-artifacts.json`** with standardized structure
- **Automatic sync script** that runs post-deployment
- **Individual artifact files** for easy imports
- **Type-safe contract integration** throughout the frontend
## üéØ **Key Benefits Delivered**
1. **Maintainability**: Single-responsibility components are easier to test and modify
2. **Reusability**: Custom hooks abstract contract logic for reuse across components
3. **Type Safety**: Full TypeScript integration with contract ABIs
4. **Developer Experience**: Standardized deployment and sync workflow
5. **Production Ready**: Comprehensive error handling and user feedback
The Volatility Vanguard prediction game is now fully modularized and follows the engineering mandate. Users can seamlessly bet 0.1 cUSD on token volatility predictions with automatic 7-day resolution and winner payouts!